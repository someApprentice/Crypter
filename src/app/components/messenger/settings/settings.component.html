<div class="settings bg-white shadow p-3 mb-xl-2">
    <form>
      <div class="form-group row">
        <label for="id" class="col-sm-2 col-form-label"><b>ID</b></label>
        <div class="col-sm-10">
          <input id="id" type="text" readonly class="form-control-plaintext" value="{{ user?.uuid }}">
        </div>
      </div>
    </form>

    <hr>

    <form>
      <div class="form-group row">
        <label for="name" class="col-sm-2 col-form-label"><b>Name</b></label>
        <div class="col-sm-10">
          <input id="name" type="text" readonly class="form-control" title="Not implemeted yet" value="{{ user?.name }}">
        </div>
      </div>
    </form>

    <hr>

    <form>
      <div class="form-group row">
        <label for="username" class="col-sm-2 col-form-label"><b>Username</b></label>
        <div class="col-sm-10">
          <input id="username" type="text" readonly class="form-control" title="Not implemeted yet">
        </div>
      </div>
    </form>

    <hr>

    <form>
      <div class="form-group row">
        <label for="email" class="col-sm-2 col-form-label"><b>Email</b></label>
        <div class="col-sm-10">
          <input id="email" type="text" readonly class="form-control" title="Not implemeted yet" value="{{ user?.email }}">
        </div>
      </div>
    </form>

    <hr>

    <form [formGroup]="changePasswordForm" (ngSubmit)="changePassword($event)">
      <div class="form-group row">
        <label for="current-password" class="col-sm-2 col-form-label"><b>Current password</b></label>
        <div class="col-sm-10">
          <input
            #currentPassword
            formControlName="currentPassword"
            id="current-password"
            type="password"
            name="currentPassword"
            required
            minlength="6"
            class="form-control"
            [class.is-valid]="changePasswordForm.controls['currentPassword'].valid"
            [class.is-invalid]="changePasswordForm.controls['currentPassword'].invalid && changePasswordForm.controls['currentPassword'].dirty"
          >
          
          <div class="valid-feedback d-none" [class.d-block]="isChangePasswordSuccessful && changePasswordForm.untouched">
            Success
          </div>

          <div class="invalid-feedback d-none" [class.d-block]="changePasswordError">
            {{ changePasswordError }}
          </div>
        </div>          
      </div>

      <div class="form-group row my-1">
        <label for="new-password" class="col-sm-2 col-form-label"><b>New password</b></label>
        <div class="col-sm-10">
          <input
            formControlName="newPassword"
            id="new-password"
            type="password"
            name="newPassword"
            required
            minlength="6"
            class="form-control"
            [class.is-valid]="changePasswordForm.controls['newPassword'].valid"
            [class.is-invalid]="changePasswordForm.controls['newPassword'].invalid && changePasswordForm.controls['newPassword'].dirty"
          >

          <div class="invalid-feedback d-none" [class.d-block]="changePasswordForm.controls['newPassword'].invalid && changePasswordForm.controls['newPassword'].dirty">
              Password must be at least 6 characters long.
          </div>
        </div>
      </div>

      <div class="form-group row my-1">
        <label for="retry-password" class="col-sm-2 col-form-label"><b>Retry password</b></label>
        <div class="col-sm-10">
          <input
            formControlName="retryPassword"
            id="retry-password"
            type="password"
            name="retryPassword"
            required
            minlength="6"
            class="form-control"
            [class.is-valid]="changePasswordForm.controls['retryPassword'].valid"
            [class.is-invalid]="changePasswordForm.controls['retryPassword'].invalid && changePasswordForm.controls['retryPassword'].dirty"
          >

          <div class="invalid-feedback d-none" [class.d-block]="changePasswordForm.controls['retryPassword'].invalid && changePasswordForm.controls['retryPassword'].dirty">
              Passwords do not match.
          </div>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-sm-2 col-form-label"></label>
        <div class="col-sm-10">
          <button type="submit" name="submitChangePassword" class="btn btn-primary" [disabled]="!changePasswordForm.valid">
            <span *ngIf="!isChangePasswordPending">Change password</span>
            <span *ngIf="isChangePasswordPending" class="spinner-border spinner-border-sm mx-1" role="status" aria-hidden="true"></span>
          </button>
        </div>
      </div>
    </form>

    <hr>

    <h4>Keys</h4>

    <div class="my-2">
      <form>
        <div class="form-group row">
          <label for="fingerprint" class="col-sm-2 col-form-label"><b>Fingerprint</b></label>
          <div class="col-sm-10">
            <input id="fingerprint" type="text" readonly class="form-control-plaintext" value="{{ user?.fingerprint }}">
          </div>
        </div>
      </form>
    </div>

    <div class="my-2 mb-3">
      <h6><b>Public key</b></h6>

      <pre class="code-wrapper d-inline-block border rounded my-2 p-3 bg-light overflow-auto"><code>{{ user?.public_key }}</code></pre>

      <div>
        <button type="button" class="btn btn-outline-dark" title="Not implemeted yet" disabled>Download public key</button>
      </div>
    </div>

    <div class="my-2 mb-3">
      <h6><b>Private key</b></h6>
      <button type="button" class="btn btn-outline-dark" title="Not implemeted yet" disabled>Download private key</button>
    </div>
</div>
